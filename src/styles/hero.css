:root {
  --primary: #00ffd1;
  --primary-dim: #004d40;
  --primary-glow: rgba(0, 255, 209, 0.8);
  --primary-subtle: rgba(0, 255, 209, 0.1);
  --secondary: #6366f1;
  --accent: #0ea5e9;
  --bg-dark: #000;
  --text-primary: #fff;
  --text-muted: rgba(255, 255, 255, 0.5);
  --font-display: "Orbitron", sans-serif;
  --font-body: "Rajdhani", sans-serif;
}

*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* =========================
   HERO WRAPPER
   ========================= */
.hero-wrapper {
  position: fixed;
  inset: 0;
  overflow: hidden;
  z-index: 1;
  background: transparent; /* allow VANTA to show */
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

.hero-wrapper.stage-complete {
  display: none;
}

/* During exit transition, stop extra animations to reduce contention */
.hero-wrapper.is-transitioning .orb,
.hero-wrapper.is-transitioning .particle,
.hero-wrapper.is-transitioning .corner-decoration,
.hero-wrapper.is-transitioning .progress-fill {
  animation: none !important;
}

/* =========================
   BACKGROUND
   ========================= */
.hero-background-container {
  position: absolute;
  inset: 0;
  z-index: 1;
}

.grid-overlay {
  position: absolute;
  inset: 0;
  background-image: linear-gradient(rgba(0, 255, 209, 0.02) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 255, 209, 0.02) 1px, transparent 1px);
  background-size: 80px 80px;
  mask-image: radial-gradient(ellipse 70% 70% at center, black, transparent);
  -webkit-mask-image: radial-gradient(ellipse 70% 70% at center, black, transparent);
}

.grid-fade {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, transparent 0%, var(--bg-dark) 70%);
}

.ambient-orbs {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.3;
  animation: orbPulse 8s ease-in-out infinite;
}

.orb-1 {
  width: 400px;
  height: 400px;
  background: var(--primary);
  top: -100px;
  right: -100px;
}

.orb-2 {
  width: 300px;
  height: 300px;
  background: var(--secondary);
  bottom: -50px;
  left: -50px;
  animation-delay: -3s;
}

.orb-3 {
  width: 200px;
  height: 200px;
  background: var(--accent);
  top: 50%;
  left: 20%;
  opacity: 0.15;
  animation-delay: -5s;
}

@keyframes orbPulse {
  0%,
  100% {
    opacity: 0.2;
    transform: scale(1);
  }
  50% {
    opacity: 0.4;
    transform: scale(1.1);
  }
}

/* Particles */
.particle-field {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.particle {
  position: absolute;
  background: var(--primary);
  border-radius: 50%;
  opacity: 0;
  box-shadow: 0 0 10px var(--primary-glow);
  animation: particleRise 8s ease-out infinite;
}

@keyframes particleRise {
  0% {
    opacity: 0;
    transform: translateY(0) scale(0);
  }
  5% {
    opacity: 0.6;
    transform: translateY(0) scale(1);
  }
  95% {
    opacity: 0.6;
  }
  100% {
    opacity: 0;
    transform: translateY(-100vh) scale(0.5);
  }
}

/* Corner decorations */
.corner-decoration {
  position: absolute;
  width: 60px;
  height: 60px;
  border: 1px solid rgba(0, 255, 209, 0.2);
  opacity: 0;
  animation: cornerReveal 1s cubic-bezier(0.16, 1, 0.3, 1) 1.5s forwards;
}

@keyframes cornerReveal {
  to {
    opacity: 1;
  }
}

.corner-decoration.top-left {
  top: 30px;
  left: 30px;
  border-right: none;
  border-bottom: none;
}

.corner-decoration.top-right {
  top: 30px;
  right: 30px;
  border-left: none;
  border-bottom: none;
}

.corner-decoration.bottom-left {
  bottom: 30px;
  left: 30px;
  border-right: none;
  border-top: none;
}

.corner-decoration.bottom-right {
  bottom: 30px;
  right: 30px;
  border-left: none;
  border-top: none;
}

/* Progress bar */
.hero-progress {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 0 30px 30px;
  z-index: 20;
}

.progress-track {
  height: 2px;
  background: rgba(0, 255, 209, 0.1);
  border-radius: 1px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  width: 0;
  background: linear-gradient(90deg, var(--primary), var(--secondary));
  box-shadow: 0 0 10px var(--primary-glow);
  animation: progressGrow 1.2s ease-out forwards;
}

@keyframes progressGrow {
  to {
    width: 100%;
  }
}

/* =========================
   LOGO
   ========================= */
.logo-center-container {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 5;
  pointer-events: none;
}

.logo-spinner {
  width: clamp(180px, 28vw, 350px);
  height: clamp(180px, 28vw, 350px);
  display: flex;
  align-items: center;
  justify-content: center;

  opacity: 0.15;

  /* Make it a stable GPU layer */
  transform: translate3d(0, 0, 0);
  will-change: transform, opacity;
  backface-visibility: hidden;
  contain: layout paint;
}

.logo-spin-image {
  width: 100%;
  height: 100%;
  object-fit: contain;

  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;

  /* Glow is nice, but expensive during huge scale */
  filter: drop-shadow(0 0 20px rgba(0, 255, 209, 0.3))
    drop-shadow(0 0 40px rgba(0, 255, 209, 0.2));
}

/* stable pulse */
.stage-stable .logo-spinner {
  animation: logoDimPulse 4s ease-in-out infinite;
}

@keyframes logoDimPulse {
  0%,
  100% {
    opacity: 0.08;
    transform: scale(1);
  }
  50% {
    opacity: 0.12;
    transform: scale(1.02);
  }
}

/* GSAP takes over */
.stage-exit .logo-spinner {
  animation: none !important;
}

/* HUGE FIX: remove filter during exit to avoid lag */
.stage-exit .logo-spin-image {
  filter: none !important;
}

/* =========================
   TEXT
   ========================= */
.text-content-container {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1.5rem;
  z-index: 50;
  pointer-events: none;
}

.brand-container {
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.brand-name {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: clamp(0.2rem, 1vw, 0.6rem);
}

.brand-underline {
  height: 2px;
  width: 0;
  margin: 1rem auto 0;
  background: linear-gradient(90deg, transparent, var(--primary), transparent);
  box-shadow: 0 0 15px var(--primary-glow);
  transition: width 1s cubic-bezier(0.16, 1, 0.3, 1);
}

.stage-stable .brand-underline {
  width: 80%;
}

/* =========================
   MAIN WORD LETTERS
   ========================= */
.letter {
  font-family: var(--font-display);
  font-size: clamp(2rem, 6vw, 4.5rem);
  font-weight: 900;
  color: var(--primary-dim);
  opacity: 0; /* base hidden (flicker anim reveals) */
  display: inline-block;
}

.stage-flickering .letter {
  animation: neonFlicker 3s ease-out forwards;
}
.stage-flickering .letter-e { animation-delay: 0s; }
.stage-flickering .letter-l { animation-delay: 0.1s; }
.stage-flickering .letter-e2 { animation-delay: 0.2s; }
.stage-flickering .letter-c { animation-delay: 0.3s; }
.stage-flickering .letter-t { animation-delay: 0.4s; }
.stage-flickering .letter-r { animation-delay: 0.15s; }
.stage-flickering .letter-o { animation-delay: 0.25s; }
.stage-flickering .letter-w { animation-delay: 0.35s; }
.stage-flickering .letter-i { animation-delay: 0.45s; }
.stage-flickering .letter-z { animation-delay: 0.55s; }

@keyframes neonFlicker {
  0% { opacity: 0; color: var(--primary-dim); }
  4% { opacity: 0.2; color: #005544; }
  8% { opacity: 0.05; }
  12% { opacity: 0.35; color: #007766; }
  16% { opacity: 0.1; }
  20% { opacity: 0; }
  25% { opacity: 0.45; color: #009988; }
  30% { opacity: 0.25; }
  35% { opacity: 0.5; color: #00aa99; }
  40% { opacity: 0.2; }
  48% { opacity: 0.65; color: #00ccbb; }
  55% { opacity: 0.45; }
  62% { opacity: 0.75; color: #00ddcc; }
  68% { opacity: 0.55; }
  75% { opacity: 0.85; color: #00eedd; }
  82% { opacity: 0.7; }
  90% { opacity: 0.95; }
  100% {
    opacity: 1;
    color: var(--primary);
    text-shadow:
      0 0 10px var(--primary-glow),
      0 0 20px var(--primary-glow),
      0 0 40px rgba(0, 255, 209, 0.5);
  }
}

.stage-stable .letter {
  opacity: 1;
  color: var(--primary);
  text-shadow:
    0 0 10px var(--primary-glow),
    0 0 20px var(--primary-glow),
    0 0 40px rgba(0, 255, 209, 0.5);
  animation: subtleBreath 4s ease-in-out infinite;
}

@keyframes subtleBreath {
  0%,
  100% {
    text-shadow:
      0 0 10px var(--primary-glow),
      0 0 20px var(--primary-glow),
      0 0 40px rgba(0, 255, 209, 0.5);
  }
  50% {
    text-shadow:
      0 0 15px var(--primary-glow),
      0 0 30px var(--primary-glow),
      0 0 50px rgba(0, 255, 209, 0.6);
  }
}

/* HUGE FIX: prevent snap-to-hidden when stage becomes exit */
.stage-exit .letter {
  opacity: 1;
  animation: none !important;
}
.stage-exit .brand-underline {
  width: 80%;
}

/* =========================
   TAGLINE LETTER BY LETTER
   ========================= */
.tagline {
  display: flex;
  align-items: center;
  justify-content: center;
}

.tagline-text {
  font-family: var(--font-body);
  font-size: clamp(0.65rem, 1.5vw, 0.9rem);
  font-weight: 600;
  letter-spacing: 0.3em;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  color: var(--primary);
}

.tagline-letter {
  display: inline-block;
  color: var(--primary-dim);
  opacity: 0;
}

.letter-space {
  display: inline-block;
  width: 0.5em;
}

.stage-flickering .tagline-letter {
  animation: neonFlickerTagline 3s ease-out forwards;
}

@keyframes neonFlickerTagline {
  0% { opacity: 0; color: var(--primary-dim); text-shadow: none; }
  4% { opacity: 0.2; color: #005544; }
  8% { opacity: 0.05; }
  12% { opacity: 0.35; color: #007766; }
  16% { opacity: 0.1; }
  20% { opacity: 0; }
  25% { opacity: 0.45; color: #009988; }
  30% { opacity: 0.25; }
  35% { opacity: 0.5; color: #00aa99; }
  40% { opacity: 0.2; }
  48% { opacity: 0.65; color: #00ccbb; }
  55% { opacity: 0.45; }
  62% { opacity: 0.75; color: #00ddcc; }
  68% { opacity: 0.55; }
  75% { opacity: 0.85; color: #00eedd; }
  82% { opacity: 0.7; }
  90% { opacity: 0.95; }
  100% {
    opacity: 1;
    color: var(--primary);
    text-shadow: 0 0 8px var(--primary-glow), 0 0 15px rgba(0, 255, 209, 0.4);
  }
}

.stage-stable .tagline-letter {
  opacity: 1;
  color: var(--primary);
  text-shadow: 0 0 8px var(--primary-glow), 0 0 15px rgba(0, 255, 209, 0.4);
  animation: subtleBreathTagline 4s ease-in-out infinite;
}

@keyframes subtleBreathTagline {
  0%,
  100% {
    text-shadow: 0 0 8px var(--primary-glow), 0 0 15px rgba(0, 255, 209, 0.4);
  }
  50% {
    text-shadow: 0 0 12px var(--primary-glow), 0 0 20px rgba(0, 255, 209, 0.5);
  }
}

/* prevent snap on exit */
.stage-exit .tagline-letter {
  opacity: 1;
  animation: none !important;
}

/* Stagger delays for "ECE DEPARTMENT SYMPOSIUM 2026" (spaces included in index) */
.stage-flickering .tl-0 { animation-delay: 0.6s; }
.stage-flickering .tl-1 { animation-delay: 0.65s; }
.stage-flickering .tl-2 { animation-delay: 0.7s; }

.stage-flickering .tl-4 { animation-delay: 0.75s; }
.stage-flickering .tl-5 { animation-delay: 0.8s; }
.stage-flickering .tl-6 { animation-delay: 0.85s; }
.stage-flickering .tl-7 { animation-delay: 0.9s; }
.stage-flickering .tl-8 { animation-delay: 0.95s; }
.stage-flickering .tl-9 { animation-delay: 1s; }
.stage-flickering .tl-10 { animation-delay: 1.05s; }
.stage-flickering .tl-11 { animation-delay: 1.1s; }
.stage-flickering .tl-12 { animation-delay: 1.15s; }
.stage-flickering .tl-13 { animation-delay: 1.2s; }

.stage-flickering .tl-15 { animation-delay: 1.25s; }
.stage-flickering .tl-16 { animation-delay: 1.3s; }
.stage-flickering .tl-17 { animation-delay: 1.35s; }
.stage-flickering .tl-18 { animation-delay: 1.4s; }
.stage-flickering .tl-19 { animation-delay: 1.45s; }
.stage-flickering .tl-20 { animation-delay: 1.5s; }
.stage-flickering .tl-21 { animation-delay: 1.55s; }
.stage-flickering .tl-22 { animation-delay: 1.6s; }
.stage-flickering .tl-23 { animation-delay: 1.65s; }

.stage-flickering .tl-25 { animation-delay: 1.7s; }
.stage-flickering .tl-26 { animation-delay: 1.75s; }
.stage-flickering .tl-27 { animation-delay: 1.8s; }
.stage-flickering .tl-28 { animation-delay: 1.85s; }

/* =========================
   RESPONSIVE
   ========================= */
@media (max-width: 768px) {
  .letter {
    font-size: clamp(1.5rem, 6vw, 3rem);
  }
  .logo-spinner {
    width: clamp(140px, 35vw, 220px);
    height: clamp(140px, 35vw, 220px);
  }
  .corner-decoration {
    width: 40px;
    height: 40px;
  }
  .corner-decoration.top-left,
  .corner-decoration.bottom-left {
    left: 15px;
  }
  .corner-decoration.top-right,
  .corner-decoration.bottom-right {
    right: 15px;
  }
  .corner-decoration.top-left,
  .corner-decoration.top-right {
    top: 15px;
  }
  .corner-decoration.bottom-left,
  .corner-decoration.bottom-right {
    bottom: 15px;
  }
  .hero-progress {
    padding: 0 15px 15px;
  }
  .tagline-text {
    font-size: 0.6rem;
    letter-spacing: 0.2em;
  }
}

@media (max-width: 480px) {
  .letter {
    font-size: clamp(1.2rem, 5.5vw, 2rem);
  }
  .logo-spinner {
    width: 100px;
    height: 100px;
  }
  .orb-1,
  .orb-2,
  .orb-3 {
    display: none;
  }
  .tagline-text {
    font-size: 0.5rem;
    letter-spacing: 0.15em;
  }
}
/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .orb,
  .particle,
  .logo-spinner,
  .letter,
  .tagline-letter {
    animation: none !important;
  }
}